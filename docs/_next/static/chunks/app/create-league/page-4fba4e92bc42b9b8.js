(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[819],{4553:(e,t,a)=>{Promise.resolve().then(a.bind(a,960))},6046:(e,t,a)=>{"use strict";var r=a(6658);a.o(r,"useRouter")&&a.d(t,{useRouter:function(){return r.useRouter}})},960:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>l});var r=a(5155),s=a(2115),n=a(6046);function l(){let e=(0,n.useRouter)(),[t,a]=(0,s.useState)(1),[l,u]=(0,s.useState)(""),[c,i]=(0,s.useState)(2),[o,d]=(0,s.useState)([]),[g,m]=(0,s.useState)(0);(0,s.useEffect)(()=>{if(2===t){let e=Math.floor(30/c);d(Array.from({length:c},(t,a)=>({name:"Participant ".concat(a+1),entrants:e})))}},[t,c]),(0,s.useEffect)(()=>{m(30-o.reduce((e,t)=>e+t.entrants,0))},[o]);let b=(e,t,a)=>{let r=[...o];"name"===t?r[e].name=a:r[e].entrants=Number(a),d(r)},h=async t=>{if(t.preventDefault(),0!==g){alert("Total entrants must be exactly 30. Adjust by ".concat(g>0?"adding":"removing"," ").concat(Math.abs(g)," entrants."));return}let a=await fetch("http://localhost:5050/create-league",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({leagueName:l,participants:o})}),r=await a.json();localStorage.setItem("currentLeague",JSON.stringify(o)),localStorage.setItem("currentLeagueName",JSON.stringify(l)),alert("League Created! ID: ".concat(r.leagueId)),e.push("/raffle-room")};return(0,r.jsxs)("main",{className:"flex flex-col items-center justify-center min-h-screen bg-gray-900 text-white p-6",children:[1===t&&(0,r.jsxs)("div",{className:"w-96 bg-gray-800 p-6 rounded-lg shadow-lg",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-yellow-400 mb-4",children:"Create a League"}),(0,r.jsxs)("label",{className:"block mb-4",children:["League Name:",(0,r.jsx)("input",{type:"text",value:l,onChange:e=>u(e.target.value),className:"w-full mt-1 p-2 bg-gray-700 border border-gray-600 rounded",required:!0})]}),(0,r.jsxs)("label",{className:"block mb-4",children:["Number of Participants:",(0,r.jsx)("input",{type:"number",value:c,onChange:e=>i(Number(e.target.value)),className:"w-full mt-1 p-2 bg-gray-700 border border-gray-600 rounded",required:!0,min:"2",max:"30"})]}),(0,r.jsx)("button",{onClick:()=>{if(!l.trim()){alert("Please enter a league name.");return}if(c<2||c>30){alert("Number of participants must be between 2 and 30.");return}a(2)},className:"w-full bg-blue-600 text-white py-2 rounded mt-4 hover:bg-blue-500",children:"Next"})]}),2===t&&(0,r.jsxs)("form",{onSubmit:h,className:"w-96 bg-gray-800 p-6 rounded-lg shadow-lg",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold text-yellow-400 mb-4",children:"Assign Entrants"}),(0,r.jsxs)("div",{className:"bg-gray-700 text-gray-300 p-3 rounded-md mb-4 text-sm",children:[(0,r.jsxs)("p",{children:["Each participant has been automatically assigned ",(0,r.jsx)("b",{children:Math.floor(30/c)})," entrants."]}),(0,r.jsxs)("p",{children:["There are ",(0,r.jsx)("b",{children:g})," entrants left to distribute. Adjust as needed."]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-[3fr_1fr] gap-4 text-gray-400 text-sm mb-2",children:[(0,r.jsx)("span",{children:"Participants"}),(0,r.jsx)("span",{children:"Entrants"})]}),o.map((e,t)=>(0,r.jsxs)("div",{className:"grid grid-cols-[3fr_1fr] gap-4 mb-2",children:[(0,r.jsx)("input",{type:"text",value:e.name,onFocus:e=>e.target.value==="Participant ".concat(t+1)&&(e.target.value=""),onBlur:e=>""===e.target.value.trim()&&(e.target.value="Participant ".concat(t+1)),onChange:e=>b(t,"name",e.target.value),className:"p-2 bg-gray-700 border border-gray-600 rounded w-full",required:!0}),(0,r.jsx)("select",{value:e.entrants,onChange:e=>b(t,"entrants",e.target.value),className:"p-2 bg-gray-700 border border-gray-600 rounded w-full",children:[...Array(30).keys()].map(e=>(0,r.jsx)("option",{value:e+1,children:e+1},e+1))})]},t)),(0,r.jsxs)("p",{className:"mt-4 text-sm ".concat(0===g?"text-green-400":"text-red-400"),children:["Entrants Assigned: ",30-g," / 30"]}),(0,r.jsx)("button",{type:"submit",className:"w-full bg-green-600 text-white py-2 rounded mt-4 hover:bg-green-500",children:"Create League"})]})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[441,517,358],()=>t(4553)),_N_E=e.O()}]);