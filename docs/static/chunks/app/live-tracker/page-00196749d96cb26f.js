(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[772],{3052:(e,r,t)=>{Promise.resolve().then(t.bind(t,9474))},6046:(e,r,t)=>{"use strict";var a=t(6658);t.o(a,"useRouter")&&t.d(r,{useRouter:function(){return a.useRouter}}),t.o(a,"useSearchParams")&&t.d(r,{useSearchParams:function(){return a.useSearchParams}})},9474:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>g});var a=t(5155),s=t(2115),l=t(6046);let c=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),n=function(){for(var e=arguments.length,r=Array(e),t=0;t<e;t++)r[t]=arguments[t];return r.filter((e,r,t)=>!!e&&""!==e.trim()&&t.indexOf(e)===r).join(" ").trim()};var o={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let i=(0,s.forwardRef)((e,r)=>{let{color:t="currentColor",size:a=24,strokeWidth:l=2,absoluteStrokeWidth:c,className:i="",children:d,iconNode:u,...h}=e;return(0,s.createElement)("svg",{ref:r,...o,width:a,height:a,stroke:t,strokeWidth:c?24*Number(l)/Number(a):l,className:n("lucide",i),...h},[...u.map(e=>{let[r,t]=e;return(0,s.createElement)(r,t)}),...Array.isArray(d)?d:[d]])}),d=(e,r)=>{let t=(0,s.forwardRef)((t,a)=>{let{className:l,...o}=t;return(0,s.createElement)(i,{ref:a,iconNode:r,className:n("lucide-".concat(c(e)),l),...o})});return t.displayName="".concat(e),t},u=d("ToggleRight",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"6",ry:"6",key:"f2vt7d"}],["circle",{cx:"16",cy:"12",r:"2",key:"4ma0v8"}]]),h=d("ToggleLeft",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"6",ry:"6",key:"f2vt7d"}],["circle",{cx:"8",cy:"12",r:"2",key:"1nvbw3"}]]),m=d("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);function x(e){let{onSelect:r,onClose:t}=e,[l,c]=(0,s.useState)(""),[n,o]=(0,s.useState)([]),[i,d]=(0,s.useState)([]);(0,s.useEffect)(()=>{fetch("".concat("http://localhost:4000","/wrestlers")).then(e=>e.json()).then(e=>d(e)).catch(()=>console.error("❌ Failed to load wrestlers"))},[]),(0,s.useEffect)(()=>{o(i.filter(e=>e.toLowerCase().includes(l.toLowerCase())))},[l,i]);let u=e=>{r(e),t&&t()};return(0,a.jsxs)("div",{className:"relative w-full",children:[(0,a.jsx)("input",{type:"text",value:l,onChange:e=>c(e.target.value),className:"w-full p-2 bg-gray-700 border border-gray-600 rounded",placeholder:"Search Wrestlers..."}),l&&(0,a.jsx)("ul",{className:"absolute w-full bg-gray-800 border border-gray-600 rounded mt-1 max-h-48 overflow-auto",children:n.map((e,r)=>(0,a.jsx)("li",{onClick:()=>u(e),className:"p-2 hover:bg-gray-700 cursor-pointer",children:e},r))})]})}function g(){return(0,a.jsx)(s.Suspense,{fallback:(0,a.jsx)("div",{className:"text-gray-400",children:"Loading live tracker..."}),children:(0,a.jsx)(y,{})})}function y(){let e=(0,l.useSearchParams)().get("leagueId"),[r,t]=(0,s.useState)([]),[c,n]=(0,s.useState)(null),o="http://localhost:4000";(0,s.useEffect)(()=>{e&&fetch("".concat(o,"/live-tracker?leagueId=").concat(e)).then(e=>e.json()).then(e=>{Array.isArray(e)?t(e):(console.error("\uD83D\uDEA8 Invalid data format:",e),t([]))}).catch(e=>{console.error("❌ Failed to load live tracker data:",e),t([])})},[e,o]);let i=async a=>{t(r.map(e=>e.number===a?{...e,status:"Active"===e.status?"Eliminated":"Active"}:e));try{await fetch("".concat(o,"/live-tracker/toggle-status"),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({leagueId:e,entrantNumber:a})})}catch(e){console.error("❌ Failed to update status:",e)}},d=async(a,s)=>{t(r.map(e=>e.number===a?{...e,name:s}:e)),n(null);try{await fetch("".concat(o,"/live-tracker/update-wrestler"),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({leagueId:e,entrantNumber:a,newName:s})})}catch(e){console.error("❌ Failed to update wrestler name:",e)}};return console.log("Fetching from API:","http://localhost:4000"),(0,a.jsxs)("main",{className:"flex flex-col items-center justify-center min-h-screen bg-gray-900 text-white p-6",children:[(0,a.jsx)("h1",{className:"text-4xl font-bold text-yellow-400",children:"Live Tracker"}),(0,a.jsx)("p",{className:"mt-2 text-gray-300",children:"Tracking the action for your league!"}),(0,a.jsxs)("table",{className:"mt-6 w-full max-w-2xl border-collapse border border-gray-700 text-left",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{className:"bg-gray-800 text-yellow-400",children:[(0,a.jsx)("th",{className:"p-3 border border-gray-700",children:"#"}),(0,a.jsx)("th",{className:"p-3 border border-gray-700",children:"Participant"}),(0,a.jsx)("th",{className:"p-3 border border-gray-700",children:"Wrestler Name"}),(0,a.jsx)("th",{className:"p-3 border border-gray-700",children:"Status"}),(0,a.jsx)("th",{className:"p-3 border border-gray-700",children:"Edit"})]})}),(0,a.jsx)("tbody",{children:r.length>0?r.map(e=>(0,a.jsxs)("tr",{className:"border border-gray-700 ".concat("Eliminated"===e.status?"opacity-50 bg-gray-700":""),children:[(0,a.jsx)("td",{className:"p-3",children:e.number}),(0,a.jsx)("td",{className:"p-3",children:e.participant}),(0,a.jsx)("td",{className:"p-3",children:c===e.number?(0,a.jsx)(x,{onSelect:r=>d(e.number,r),onClose:()=>n(null)}):e.name}),(0,a.jsx)("td",{className:"p-3",children:(0,a.jsx)("button",{onClick:()=>i(e.number),className:"focus:outline-none",children:"Active"===e.status?(0,a.jsx)(u,{className:"text-green-500 w-6 h-6"}):(0,a.jsx)(h,{className:"text-red-500 w-6 h-6"})})}),(0,a.jsx)("td",{className:"p-3",children:(0,a.jsx)("button",{onClick:()=>n(e.number),className:"text-blue-400 hover:underline",children:(0,a.jsx)(m,{className:"w-5 h-5 text-blue-400 hover:text-blue-300"})})})]},e.number)):(0,a.jsx)("tr",{children:(0,a.jsx)("td",{colSpan:5,className:"text-center text-gray-400 p-4",children:"Loading entrants..."})})})]})]})}}},e=>{var r=r=>e(e.s=r);e.O(0,[441,517,358],()=>r(3052)),_N_E=e.O()}]);